{"pageProps":{"postData":{"markdownPath":"handling-flash-of-default-theme","contentHtml":"\n<p>If you have chosen Stitches as the styling library for your Next.js app, you have probably noticed the additional configuration required to ensure they work together seamlessly. As per the Stitches docs, we have to include the following code in the <code>&#x3C;Head /></code> element of the Next document:</p>\n<pre class=\"language-tsx\"><code class=\"language-tsx code-highlight\"><span class=\"code-line line-number\" line=\"1\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span><span class=\"token class-name\">Head</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span></span><span class=\"code-line line-number highlight-line\" line=\"2\"><span class=\"token plain-text\">  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>style</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>stitches<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">dangerouslySetInnerHTML</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> __html<span class=\"token operator\">:</span> <span class=\"token function\">getCssText</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n</span></span><span class=\"code-line line-number\" line=\"3\"><span class=\"token plain-text\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span><span class=\"token class-name\">Head</span></span><span class=\"token punctuation\">></span></span>\n</span></code></pre>\n<p>If you have created additional themes using Stitches and are applying those themes from <code>localStorage</code>, you may notice a momentary flash of your default theme before the correct theme is applied.</p>\n<p>The reason for this behavior is that the <code>getCssText</code> function of Stitches, which is injected into the <code>&#x3C;Head /></code> element, does not include styles for non-default themes. Consequently, these styles are <strong>not</strong> included in the initial HTML document delivered by Next.js, but are instead loaded client-side. You can confirm this by inspecting the HTML delivered by Next.js on the first load using the Network tab in your browser. You will observe that it does not contain styles for non-default themes.</p>\n<p>To resolve this issue, we can generate the CSS for the non-default Stitches theme and append it to the <code>&#x3C;style /></code> element in <code>_document.tsx</code>.</p>\n<p>First, add the following code snippet to <code>_document.tsx</code> in your app:</p>\n<pre class=\"language-ts\"><code class=\"language-ts code-highlight\"><span class=\"code-line line-number\" line=\"1\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Token <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@stitches/react/types/theme'</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line line-number\" line=\"2\">\n</span><span class=\"code-line line-number\" line=\"3\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">StitchesTheme</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">typeof</span> stitchesTheme<span class=\"token punctuation\">;</span> <span class=\"token comment\">// Import your non-default Stitches theme and use it here as a type. </span>\n</span><span class=\"code-line line-number\" line=\"4\">\n</span><span class=\"code-line line-number\" line=\"5\"><span class=\"token keyword\">const</span> defineCssVar <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>object<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">|</span> Token<span class=\"token operator\">&#x3C;</span><span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span> value<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> prefix<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n</span><span class=\"code-line line-number\" line=\"6\">  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> object <span class=\"token operator\">===</span> <span class=\"token string\">'string'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"code-line line-number\" line=\"7\">    <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">--</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>prefix <span class=\"token operator\">?</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>prefix<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>object<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>value<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line line-number\" line=\"8\">  <span class=\"token punctuation\">}</span>\n</span><span class=\"code-line line-number\" line=\"9\">\n</span><span class=\"code-line line-number\" line=\"10\">  <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">--</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>object<span class=\"token punctuation\">.</span>scale <span class=\"token operator\">?</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>object<span class=\"token punctuation\">.</span>scale<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>object<span class=\"token punctuation\">.</span>token<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>object<span class=\"token punctuation\">.</span>value<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line line-number\" line=\"11\"><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line line-number\" line=\"12\">\n</span><span class=\"code-line line-number\" line=\"13\"><span class=\"token keyword\">const</span> getThemeCss <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>themes<span class=\"token operator\">:</span> StitchesTheme<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n</span><span class=\"code-line line-number\" line=\"14\">  <span class=\"token keyword\">let</span> css <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line line-number\" line=\"15\">\n</span><span class=\"code-line line-number\" line=\"16\">  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&#x3C;</span> themes<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"code-line line-number\" line=\"17\">    <span class=\"token keyword\">const</span> themeVars<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">values</span><span class=\"token punctuation\">(</span>themes<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>colors<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">defineCssVar</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">;</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line line-number\" line=\"18\">\n</span><span class=\"code-line line-number\" line=\"19\">    <span class=\"token keyword\">const</span> themeCss<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">.</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>themes<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>className<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">{</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>themeVars<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">}</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line line-number\" line=\"20\">\n</span><span class=\"code-line line-number\" line=\"21\">    css <span class=\"token operator\">+=</span> themeCss<span class=\"token punctuation\">;</span>\n</span><span class=\"code-line line-number\" line=\"22\">  <span class=\"token punctuation\">}</span>\n</span><span class=\"code-line line-number\" line=\"23\">\n</span><span class=\"code-line line-number\" line=\"24\">  <span class=\"token keyword\">return</span> css<span class=\"token punctuation\">;</span>\n</span><span class=\"code-line line-number\" line=\"25\"><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line line-number\" line=\"26\">\n</span><span class=\"code-line line-number\" line=\"27\"><span class=\"token keyword\">const</span> themeCss <span class=\"token operator\">=</span> <span class=\"token function\">getThemeCss</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>stitchesTheme<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span></code></pre>\n<p>The <code>getThemeCss()</code> function here parses all the colors of the theme(s) and generates CSS out of them.</p>\n<p>Now, you can take the generated CSS and append it to the <code>dangerouslySetInnerHTML</code> prop on the <code>&#x3C;style /></code> element used by Stitches:</p>\n<pre class=\"language-tsx\"><code class=\"language-tsx code-highlight\"><span class=\"code-line line-number\" line=\"1\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">Document</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"code-line line-number\" line=\"2\">  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n</span><span class=\"code-line line-number\" line=\"3\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span><span class=\"token class-name\">Html</span></span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>en<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span></span><span class=\"code-line line-number\" line=\"4\"><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span><span class=\"token class-name\">Head</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span></span><span class=\"code-line line-number highlight-line\" line=\"5\"><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>style</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>stitches<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">dangerouslySetInnerHTML</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> __html<span class=\"token operator\">:</span> <span class=\"token function\">getCssText</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> themeCss <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n</span></span><span class=\"code-line line-number\" line=\"6\"><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span><span class=\"token class-name\">Head</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span></span><span class=\"code-line line-number\" line=\"7\"><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>body</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span></span><span class=\"code-line line-number\" line=\"8\"><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span><span class=\"token class-name\">Main</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n</span></span><span class=\"code-line line-number\" line=\"9\"><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span><span class=\"token class-name\">NextScript</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n</span></span><span class=\"code-line line-number\" line=\"10\"><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>body</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span></span><span class=\"code-line line-number\" line=\"11\"><span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span><span class=\"token class-name\">Html</span></span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line line-number\" line=\"12\">  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line line-number\" line=\"13\"><span class=\"token punctuation\">}</span>\n</span></code></pre>\n<p>Now, if you reinspect the HTML document rendered by Next.js, you will notice that the styles of the extra theme(s) are included. Reloading the page should no longer result in a flash of the default theme.</p>\n<p>For reference, here's an example of what the entire <code>_document.tsx</code> would look like in my case:</p>\n<pre class=\"language-tsx\"><code class=\"language-tsx code-highlight\"><span class=\"code-line line-number\" line=\"1\"><span class=\"token keyword\">import</span> <span class=\"token imports\"><span class=\"token punctuation\">{</span> <span class=\"token maybe-class-name\">Html</span><span class=\"token punctuation\">,</span> <span class=\"token maybe-class-name\">Head</span><span class=\"token punctuation\">,</span> <span class=\"token maybe-class-name\">Main</span><span class=\"token punctuation\">,</span> <span class=\"token maybe-class-name\">NextScript</span> <span class=\"token punctuation\">}</span></span> <span class=\"token keyword\">from</span> <span class=\"token string\">'next/document'</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line line-number\" line=\"2\"><span class=\"token keyword\">import</span> <span class=\"token imports\"><span class=\"token punctuation\">{</span> getCssText<span class=\"token punctuation\">,</span> lightTheme <span class=\"token punctuation\">}</span></span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../../stitches.config'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// path-to/stitches.config</span>\n</span><span class=\"code-line line-number\" line=\"3\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">Token</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@stitches/react/types/theme'</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line line-number\" line=\"4\">\n</span><span class=\"code-line line-number\" line=\"5\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">StitchesTheme</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">typeof</span> lightTheme<span class=\"token punctuation\">;</span> <span class=\"token comment\">// Import your non-default Stitches theme and use it here as a type.</span>\n</span><span class=\"code-line line-number\" line=\"6\">\n</span><span class=\"code-line line-number\" line=\"7\"><span class=\"token keyword\">const</span> defineCssVar <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>object<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">|</span> <span class=\"token maybe-class-name\">Token</span><span class=\"token operator\">&#x3C;</span><span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span> value<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> prefix<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n</span><span class=\"code-line line-number\" line=\"8\">  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> object <span class=\"token operator\">===</span> <span class=\"token string\">'string'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"code-line line-number\" line=\"9\">    <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">--</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>prefix <span class=\"token operator\">?</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>prefix<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>object<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>value<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line line-number\" line=\"10\">  <span class=\"token punctuation\">}</span>\n</span><span class=\"code-line line-number\" line=\"11\">\n</span><span class=\"code-line line-number\" line=\"12\">  <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">--</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>object<span class=\"token punctuation\">.</span>scale <span class=\"token operator\">?</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>object<span class=\"token punctuation\">.</span>scale<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>object<span class=\"token punctuation\">.</span>token<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>object<span class=\"token punctuation\">.</span>value<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line line-number\" line=\"13\"><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line line-number\" line=\"14\">\n</span><span class=\"code-line line-number\" line=\"15\"><span class=\"token keyword\">const</span> getThemeCss <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>themes<span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">StitchesTheme</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n</span><span class=\"code-line line-number\" line=\"16\">  <span class=\"token keyword\">let</span> css <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line line-number\" line=\"17\">\n</span><span class=\"code-line line-number\" line=\"18\">  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&#x3C;</span> themes<span class=\"token punctuation\">.</span><span class=\"token property-access\">length</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"code-line line-number\" line=\"19\">    <span class=\"token keyword\">const</span> themeVars<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token known-class-name class-name\">Object</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">values</span><span class=\"token punctuation\">(</span>themes<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">colors</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">defineCssVar</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">;</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line line-number\" line=\"20\">\n</span><span class=\"code-line line-number\" line=\"21\">    <span class=\"token keyword\">const</span> themeCss<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">.</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>themes<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>className<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">{</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>themeVars<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">}</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line line-number\" line=\"22\">\n</span><span class=\"code-line line-number\" line=\"23\">    css <span class=\"token operator\">+=</span> themeCss<span class=\"token punctuation\">;</span>\n</span><span class=\"code-line line-number\" line=\"24\">  <span class=\"token punctuation\">}</span>\n</span><span class=\"code-line line-number\" line=\"25\">\n</span><span class=\"code-line line-number\" line=\"26\">  <span class=\"token keyword\">return</span> css<span class=\"token punctuation\">;</span>\n</span><span class=\"code-line line-number\" line=\"27\"><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line line-number\" line=\"28\">\n</span><span class=\"code-line line-number\" line=\"29\"><span class=\"token keyword\">const</span> themeCss <span class=\"token operator\">=</span> <span class=\"token function\">getThemeCss</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>lightTheme<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line line-number\" line=\"30\">\n</span><span class=\"code-line line-number\" line=\"31\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">Document</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"code-line line-number\" line=\"32\">  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n</span><span class=\"code-line line-number\" line=\"33\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span><span class=\"token class-name\">Html</span></span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>en<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span></span><span class=\"code-line line-number\" line=\"34\"><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span><span class=\"token class-name\">Head</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span></span><span class=\"code-line line-number\" line=\"35\"><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>style</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>stitches<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">dangerouslySetInnerHTML</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> __html<span class=\"token operator\">:</span> <span class=\"token function\">getCssText</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> themeCss <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n</span></span><span class=\"code-line line-number\" line=\"36\"><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span><span class=\"token class-name\">Head</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span></span><span class=\"code-line line-number\" line=\"37\"><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>body</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span></span><span class=\"code-line line-number\" line=\"38\"><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span><span class=\"token class-name\">Main</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n</span></span><span class=\"code-line line-number\" line=\"39\"><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span><span class=\"token class-name\">NextScript</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n</span></span><span class=\"code-line line-number\" line=\"40\"><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>body</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span></span><span class=\"code-line line-number\" line=\"41\"><span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span><span class=\"token class-name\">Html</span></span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line line-number\" line=\"42\">  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line line-number\" line=\"43\"><span class=\"token punctuation\">}</span>\n</span></code></pre>\n","title":"Next.js/Stitches: Handling Flash of Default Theme","date":"2023-05-26"}},"__N_SSG":true}